Readme

This is the complete, professional-grade Dynamic Spawn Engine (DSE). It is designed specifically for a 
Persistent World (PW) environment‚Äîbalancing ultra-low CPU usage with "Self-Healing" stability.


üìú The "DSE" Encounter System (v1.0)

Dynamic Spawn Engine for NWN:EE

üìù Overview

This system is a low-impact, high-reliability monster spawning engine. It is designed to handle multiple players (like "Bob" and "Bill") in the same room without lagging the server or breaking if a monster gets stuck.

Instead of monsters "reporting" their deaths, a single Brain Script (The Manager) scans the area every 2 minutes to decide what needs to happen.
üõ†Ô∏è How it Works (The 4 Phases)
1. The Janitor (Cleanup)

Every time the script runs, it looks for dead bodies with the DSE_SPAWN tag. If it finds any, it vaporizes them. This keeps your floor clean and prevents "Corpse Lag."
2. The VIP Registry (The List)

The system keeps a list of every player in the area.
   - If a player leaves, it removes them.
   - If a player enters, it adds them.
   - It automatically "heals" the list if there are gaps (the Void Fix).

3. The Live Scan (The Radar)

The script acts like a radar for every player:
   - It checks for living monsters within 40 meters of each player.
   - If monsters are found: It assumes the player is still "Busy" and waits.
   - If no monsters are found: It proceeds to the next phase.

4. The Dice Roll (The Action)

If a player is "Free," the system rolls a 100-sided die.
   - If the roll is equal to or lower than your Spawn Chance (default 20%), it spawns a new squad of monsters at a random point nearby.

üìÇ File Directory
File Name	                                       Purpose	                                                            Where to Put It
- dse_inc	                The Settings. Change spawn rates, tags, and debug mode                                here.	N/A (Included in scripts)
- dse_area_enter            The Doorman. Registers players when they walk in.                                   	Area Events -> OnAreaEnter
- dse_area_exit	              The Checkout. Removes players when they leave.                                    	Area Events -> OnAreaExit
- dse_area_loop	             The Brain. Manages the scans, cleanup, and logic.	                                    Called by Entry/Loop
- dse_spawn_act             The Muscle. Actually puts the monsters in the world.	                                N/A (Called by Brain)

‚öôÔ∏è How to Customize (For Beginners)

All major changes are made in one place: the dse_inc script.
   - To change the Difficulty: Adjust DSE_MIN_MOBS and DSE_MAX_MOBS.
   - To change the Frequency: Change the fWaitTime at the bottom of dse_area_loop.
   - To change the Luck: Adjust DSE_SPAWN_CHANCE. A 100 means a fight happens every single time the timer rings.
   - To see what the "Brain" is thinking: Set DSE_DEBUG_MODE to 1. This will send yellow text messages to your chat box explaining every move the script makes.

‚ö†Ô∏è Important Rules
    1. The Tag is King: Every monster you want the system to recognize MUST have the tag DSE_SPAWN.
    2. No Death Scripts Needed: You do not need to put anything in the monster's OnDeath slot. The Brain handles it!
    3. Area Settings: Ensure your Area is set to "Active" or has players in it, otherwise the loop will safely shut itself down.


Efficiency

This report compares our "Brain Loop" (DSE) against the three most common ways builders handle encounters in Neverwinter Nights. Each has a specific "cost" to the server's CPU and your time as a developer.
üìä Efficiency Comparison Report

1. DSE (The Brain Loop)
The "Smart Manager" approach.

    Pros: *
        - Low CPU Idle: If no one is in the room, the script stops completely.
        - Bulk Processing: One script cleans up 100 bodies just as easily as 1.
        - Fail-Safe: Since it scans the area rather than waiting for "reports," it can't get stuck if a monster glitches.

    Cons: * 
        - The Lull: Players might have to wait for the next "tick" (e.g., 2 minutes) for a new spawn after a fight ends.
        

2. Encounter Triggers
The "Invisible Tripwire" approach.

    Pros: * 
        - Zero CPU Usage (Idle): They do literally nothing until someone steps on them.
        - Precision: You know exactly where the monsters will appear.

    Cons: * 
        - One-Shot Wonder: Usually, once a trigger fires, it‚Äôs done. Making them "reset" requires complex scripting.
        - Predictability: Players learn exactly where the "spawn spot" is.
        - "The Wall Problem": If a player stands on the edge of a trigger, they can "flicker" it, causing 50 mobs to spawn at once and crash the server.

3. Waypoints (The "Patrol" System)
The "Pre-Placed" approach.

    Pros: * 
        - Visual Design: You can see exactly where Bob and Bill will encounter enemies in the Toolset.
        - No Scripting: Great for static encounters (monsters just standing there).

    Cons: * 
        - Memory Heavy: Every waypoint is an object the server has to remember. 500 waypoints = 500 "brain cells" used.
        - Static: Once the monsters are dead, they don't come back unless you add a separate respawn script.

4. OnHeartbeat (The "Old Way")
The "Every 6 Seconds" approach.

    Pros: * 
        - Native Support: Built into every object by default.

    Cons: * 
        - The Server Killer: This is the least efficient method. If you have 100 monsters and 10 players all running an OnHeartbeat script every 6 seconds, the server will lag into oblivion.
        - Unnecessary Work: It runs even if nothing is happening, like a car idling in the garage all night.

üèÜ The Efficiency Winner: The Brain Loop (DSE)
Method	              Idle Load        	Action Load	           Reliability	         Best For...
DSE Loop	              None	           Low/Steady	            Excellent	          Persistent Worlds / Long Play
Triggers	              None	              Low                	Medium	            One-time Story Quests
Waypoints	             Medium	              Low                	High	              Static Guards / Bosses
OnHeartbeat	           Extreme             	High	              Low	                Don't use this for spawns!

Why DSE wins for your project:
    - Because you need a system that adapts to how many people are in the room. Triggers are too "stiff"‚Äîthey don't care if there are 1 or 10 players. Our Brain Loop scales perfectly; it looks at the VIP list, sees three names, and adjusts the math automatically.
  

Instalation

This document serves as the "Wiring Diagram" for the Dynamic Spawn Engine (DSE). It identifies exactly where each script file connects to the Neverwinter Nights Toolset.
üìÇ DSE System: Script Placement Guide
Script Name	            Toolset Location	            Event Slot	            Description
dse_inc	                  Script Editor	              N/A (Include)	          The "Settings" file. It is not placed in a slot; other scripts "pull" settings from it.
dse_area_enter	         Area Properties              OnAreaEnter	          The "Doorman." It registers Bob and Bill and starts the Brain Loop.
dse_area_exit	           Area Properties	            OnAreaExit	          The "Checkout." It notifies the system when a player leaves the map.
dse_area_loop	            Script Editor	              N/A (Virtual)	        The "Brain." It is called by the Enter script and then runs itself on a timer.
dse_spawn_action	        Script Editor	              N/A (Virtual)	        The "Muscle." It is called by the Brain to create and "Brand" monsters.

üïπÔ∏è Non-Script Setup (Required)

To ensure the scripts can "see" the players and monsters correctly, you must set these specific fields in the Toolset:

1. The Monster (Creature Blueprint)
    - Tag: Must be exactly DSE_SPAWN (or whatever you set in dse_inc).
    - ResRef: Must match the name used in the CreateObject line within dse_spawn_action (e.g., nw_skeleton).
    - Scripts: It is recommended to clear the OnDeath and OnHeartbeat slots to maximize server performance.

2. The Area (Area Properties)
    - Events Tab: Ensure dse_area_enter is selected in the OnAreaEnter dropdown.
    - Variables: No variables need to be set manually; the Brain script will create the "VIP List" automatically when Bob or Bill walks in.

üîç Installation Checklist
    [ ] dse_inc is saved and compiled.
    [ ] dse_spawn_action is saved and compiled.
    [ ] dse_area_loop is saved and compiled.
    [ ] dse_area_enter is plugged into the Area's OnAreaEnter slot.
    [ ] dse_area_exit is plugged into the Area's OnAreaExit slot.
    [ ] Creature Tag is set to DSE_SPAWN.

Testing Tip: If you have Debug Mode turned on in dse_inc, your first test should be walking into the area. If the "Wiring" is correct, you will immediately receive a yellow message in your chat log saying "BRAIN: Starting loop..."


